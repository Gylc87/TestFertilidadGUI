var btnH=$("#btnHombre"),btnM=$("#btnMujer"),redirectMen=$(".btn-men"),redirectWomen=$(".btn-women"),btnClose=$("#closeButton"),modal=$("#myModal"),modalAux=document.getElementById("myModal"),test={},results=[],currentQuestion=0;function navigate(e){$(".hideable").each(function(){$(this).css("display","none")}),$("#"+e).css("display","block")}function navigate(e){$(".hideable").css("display","none"),$("#"+e).css("display","block")}function setupTestWomen(){showQuestionWomen(0);var e="",t=0;for(test.preguntas.forEach(function(n){e+=0==t?'<div class="boxCircle"><div id="ccircle0" class="activeCircle">1</div>':'<div id="ccircle'+t+'" class="boxCircle">'+(t+1)+"</div>",results.push(0),t++}),$(".test-circles-women").html(e),$(".boxCircle div").click(function(){$(".boxCircle div").removeClass("activeCircle"),$(this).addClass("activeCircle");var e=$(this).attr("id").split("cle")[1];return showQuestionWomen(e),currentQuestion=e+1,!1}),t=1,t=1;t<=test.preguntas.length;t++)$("#ccircle"+t).click(function(){var e=parseInt($(this).attr("id").split("cle")[1]);return showQuestionWomen(e),currentQuestion=e+1,!1})}function setupTestMen(){showQuestionMen(0);var e="",t=0;for(test.preguntas.forEach(function(n){e+=0==t?'<div class="boxCircle"><div id="circle'+t+'" class="activeCircle">1</div>':'<div id="circle'+t+'" class="boxCircle">'+(t+1)+"</div>",results.push(0),t++}),$(".test-circles-men").html(e),$(".boxCircle div").click(function(){$(".boxCircle div").removeClass("activeCircle"),$(this).addClass("activeCircle");var e=parseInt($(this).attr("id").split("cle")[1]);return showQuestionMen(e),currentQuestion=e,!1}),t=1,t=1;t<=test.preguntas.length;t++)$("#circle"+t).click(function(){return showQuestionMen($(this).attr("id").split("cle")[1]),!1})}function showQuestionMen(e){var t="",n=test.preguntas[e],s=0;n.opciones.forEach(function(e){t+="<button id='question"+s+"'>"+e+"</button>",s++}),$("#section-answers-men").html(t);s=0;n.opciones.forEach(function(e){$("#question"+s).click(function(){var e=$(this).attr("id").split("tion")[1];results[parseInt(currentQuestion)]=parseInt(e)+1;var t=getNextQuestion();if(-1!=t)$(".boxCircle div").removeClass("activeCircle"),$("#circle"+t).addClass("activeCircle"),showQuestionMen(t),currentQuestion=t;else{var n=results.reduce(function(e,t){return e+t},0);for($("#points-men").html(n),i=0;i<test.resultados.length;i++)if(console.log(n),n>8&&n<=11&&redirectMen.attr("href","https://formularios.ingenes.com/contacto/es/?origen=test-fertilidad-h-lv"),n>=12&&n<=18&&redirectMen.attr("href","https://formularios.ingenes.com/contacto/es/?origen=test-fertilidad-h-md"),n>18&&redirectMen.attr("href","https://formularios.ingenes.com/contacto/es/?origen=test-fertilidad-h-al"),n<=test.resultados[i].maximo){$("#info-results-men").html(test.resultados[i].respuesta);break}navigate("results-men")}return!1}),s++}),$("#question-men").html(n.pregunta),$("#question-content-men").html(n.explicacion)}function showQuestionWomen(e){var t="",n=test.preguntas[e],s=0;n.opciones.forEach(function(e){t+="<button id='qquestion"+s+"'>"+e+"</button>",s++}),$("#section-answers-women").html(t);s=0;n.opciones.forEach(function(e){$("#qquestion"+s).click(function(){var e=$(this).attr("id").split("tion")[1];results[parseInt(currentQuestion)]=parseInt(e)+1;var t=getNextQuestion();if(-1!=t)$(".boxCircle div").removeClass("activeCircle"),$("#ccircle"+t).addClass("activeCircle"),showQuestionWomen(t),currentQuestion=t;else{var n=results.reduce(function(e,t){return e+t},0);for($("#points-women").html(n),i=0;i<test.resultados.length;i++)if(n<=test.resultados[i].maximo){n>10&&n<=13&&redirectWomen.attr("href","https://formularios.ingenes.com/contacto/es/?origen=test-fertilidad-m-lv"),n>=14&&n<=16&&redirectWomen.attr("href","https://formularios.ingenes.com/contacto/es/?origen=test-fertilidad-m-md"),n>16&&redirectWomen.attr("href","https://www.ingenes.com/formularios/contacto/es/?origen=test-fertilidad-m-al"),$("#info-results-women").html(test.resultados[i].respuesta);break}navigate("results-women")}return!1}),s++}),$("#question-women").html(n.pregunta),$("#question-content-women").html(n.explicacion)}function getNextQuestion(){for(i=0;i<results.length;i++)if(0==results[i])return i;return-1}btnClose.click(function(){return modal.css("display","none"),!1}),btnH.click(function(){return modal.css("display","block"),navigate("men"),$.getJSON("./test.json",function(e){test=e.hombre,results=[],currentQuestion=0,setupTestMen()}),!1}),btnM.click(function(){return modal.css("display","block"),navigate("women"),$.getJSON("./test.json",function(e){test=e.mujer,results=[],currentQuestion=0,setupTestWomen()}),!1}),window.onclick=function(e){e.target==modalAux&&modal.css("display","none")};
